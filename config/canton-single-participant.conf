# canton-single-participant.conf (corrected)
_shared {
  storage {
    type = postgres
    config {
      dataSourceClass = "org.postgresql.ds.PGSimpleDataSource"
      properties = {
        serverName = "localhost"
        portNumber = "5432"
        user       = "canton"
        password   = "canton_password"
      }
    }
    parameters {
      migrate-and-start    = true
      fail-fast-on-startup = true
    }
  }
}

canton {
  features {
    enable-testing-commands = yes
  }

  participants {
    participant1 {
      storage = ${_shared.storage}
      storage.config.properties.databaseName = "canton_participant"

      admin-api {
        port    = 5012
        address = "0.0.0.0"
      }

      ledger-api {
        port    = 5011
        address = "0.0.0.0"
        # No ledger-id key here; Canton derives the ledger id from the nodeâ€™s UID.
        auth-services = [{
          type        = jwt-rs-256-crt
          certificate = "config/jwt/jwt-sign.crt"
        }]
      }

      # Optionally fix the participant's UID to the alias (keeps ledger id predictable)
      init.identity.node-identifier.type = explicit
      init.identity.node-identifier.name = "participant1"
    }
  }

  domains {
    mydomain {
      storage = ${_shared.storage}
      storage.config.properties.databaseName = "canton_domain"

      public-api {
        port    = 5018
        address = "0.0.0.0"
      }

      admin-api {
        port    = 5019
        address = "0.0.0.0"
      }

      init.domain-parameters.protocol-version = 7
    }
  }
}
